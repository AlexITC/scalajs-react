# 1.8.0

* Add support for Scala 3.0.0-RC1

* Add `monocle3` module.

* Drop support for Scala.JS 0.x

* Drop old unqualified `ext-monocle` module
  (Note: `ext-monocle-{cats,scalaz}` still exist)

* Remove code deprecated in 1.5.x

* Bug fixes:
  * Input to `AsyncCallback.traverse` should only be evaluated once per callback invocation
  * Input to `CallbackOption.traverse` should only be evaluated once per callback invocation

* Make covariant:
  * `AsyncCallback`
  * `AsyncCallback.Forked`
  * `CallbackTo`
  * `CallbackOption`

* Rename to, and deprecate:
  * `AsyncCallback.{byName => suspend}`
  * `Callback.{byName => suspend}`
  * `CallbackOption.{liftOption => option}`
  * `CallbackOption.{liftOptionCallback => optionCallback}`
  * `CallbackOption.{liftOptionLike => maybe}`
  * `CallbackOption.{liftOptionLikeCallback => maybeCallback}`
  * `CallbackOption.{liftValue => delay}`
  * `CallbackOption.liftCallback(callback) => callback.toCBO}`
  * `CallbackOption(callback) => callback.asCBO}`
  * `CallbackTo.{byName => suspend}`
  * `JsFnComponent.fromScala.{byName => delay}`
  * `Reusability.{byName => suspend}`

* Removed `.namespace` from VDOM tags - it's an ancient legacy artifact that is no longer used

* `Px[A]#extract` now takes an implicit `Px.Extract[A](Px[A] => A)` argument instead of being a macro.
  If you're using this exotic feature, you can now provide your own `Px.Extract` typeclass instances.

* Internal refactoring. This will only affect users who've explicitly sought out and directly used some of scalajs-react's internal APIs.
  * Renamed `.vdom.{Builder => VdomBuilder}`
  * Renamed `.component.builder.{Builder => ComponentBuilder}`
  * Moved `.{internal => component.builder}.AutoComponentName`
  * Moved `.{internal => component.builder}.ComponentBuilderMacros`

* Upgrade dependencies:
  * cats                    2.5.0
  * cats-effect             2.4.1
  * monocle (cats ver)      2.1.0
  * scala                   2.12.13
  * scala                   2.13.5
  * scala-collection-compat 2.4.3
  * scala.js                1.5.1
  * scalaz                  7.2.31
  * sourcecode              0.2.5


# Migration

```sh
find . -type f -name '*.scala' -exec perl -pi -e '
  s/\b(AsyncCallback[ \.]+)byName\b/\1suspend/g;
  s/\b(Callback(?:To)?[ \.]+)byName\b/\1suspend/g;
  s/\b(Reusability[ \.]+)byName\b/\1suspend/g;
  s/\b(fromScala[ \.]+)byName\b/\1delay/g;
  s/\bCallbackOption(?:[ \.]+apply| +)?\( *([^ )]+ *)\)/\1.asCBO/g;
  s/\bCallbackOption[ \.]+liftCallback\(([^ )]+)\)/\1.toCBO/g;
  s/\b(CallbackOption[ \.]+)liftOption\b/\1option/g;
  s/\b(CallbackOption[ \.]+)liftOptionCallback\b/\1optionCallback/g;
  s/\b(CallbackOption[ \.]+)liftOptionLike\b/\1maybe/g;
  s/\b(CallbackOption[ \.]+)liftOptionLikeCallback\b/\1maybeCallback/g;
  s/\b(CallbackOption[ \.]+)liftValue\b/\1delay/g;
' {} +
```
